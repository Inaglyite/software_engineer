{% extends 'admin_base.html' %}
{% block content %}
<form method="post" action="/admin/users/create">
  <h3>创建用户</h3>
  <div>
    <input name="student_id" placeholder="学号" required />
    <input name="name" placeholder="姓名" required />
    <input name="phone" placeholder="电话" required />
    <input name="password" placeholder="密码" required />
    <button type="submit">创建</button>
  </div>
</form>
<hr />
<table>
  <thead>
    <tr>
      <th>ID</th><th>学号</th><th>姓名</th><th>电话</th><th>信用分</th><th>状态</th><th>操作</th>
    </tr>
  </thead>
  <tbody>
    {% for u in users %}
    <tr>
      <td>{{ u.id }}</td>
      <td>{{ u.student_id }}</td>
      <td>{{ u.name }}</td>
      <td>{{ u.phone }}</td>
      <td>{{ u.credit_score }}</td>
      <td>{{ '活跃' if u.is_active else '禁用' }}</td>
      <td>
        <form class="inline" method="post" action="/admin/users/{{ u.id }}/toggle"><button>切换状态</button></form>
        <form class="inline" method="post" action="/admin/users/{{ u.id }}/delete" onsubmit="return confirm('确认删除?');"><button>删除</button></form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
