{% extends 'admin_base.html' %}
{% block content %}
<form method="post" action="/admin/books/create">
  <h3>创建书籍</h3>
  <div>
    <input name="isbn" placeholder="ISBN" required />
    <input name="title" placeholder="标题" required />
    <input name="author" placeholder="作者" required />
    <input name="original_price" placeholder="原价" type="number" step="0.01" required />
    <input name="selling_price" placeholder="售价" type="number" step="0.01" required />
    <select name="condition_level" required>
      <option value="excellent">excellent</option>
      <option value="good">good</option>
      <option value="fair">fair</option>
      <option value="poor">poor</option>
    </select>
    <input name="seller_id" placeholder="卖家用户ID" required />
    <input name="description" placeholder="描述(可选)" />
    <button type="submit">创建</button>
  </div>
</form>
<hr />
<table>
  <thead>
    <tr>
      <th>ID</th><th>标题</th><th>作者</th><th>ISBN</th><th>价格</th><th>状态</th><th>操作</th>
    </tr>
  </thead>
  <tbody>
    {% for b in books %}
    <tr>
      <td>{{ b.id }}</td>
      <td>{{ b.title }}</td>
      <td>{{ b.author }}</td>
      <td>{{ b.isbn }}</td>
      <td>{{ b.selling_price }}</td>
      <td><span class="status-label status-{{ b.status }}">{{ b.status }}</span></td>
      <td class="actions">
        <form class="inline" method="post" action="/admin/books/{{ b.id }}/status/available"><button {% if b.status=='available' %}disabled{% endif %}>设为在售</button></form>
        <form class="inline" method="post" action="/admin/books/{{ b.id }}/status/reserved"><button {% if b.status=='reserved' %}disabled{% endif %}>预订</button></form>
        <form class="inline" method="post" action="/admin/books/{{ b.id }}/status/sold"><button {% if b.status=='sold' %}disabled{% endif %}>售出</button></form>
        <form class="inline" method="post" action="/admin/books/{{ b.id }}/status/off_shelf"><button {% if b.status=='off_shelf' %}disabled{% endif %}>下架</button></form>
        <form class="inline" method="post" action="/admin/books/{{ b.id }}/delete" onsubmit="return confirm('确认删除?');"><button>删除</button></form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
